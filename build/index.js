(()=>{"use strict";var e,t={919:(e,t,n)=>{const i=window.wp.plugins,o=window.wp.i18n,r=window.wp.element,a=window.wp.data,l=window.wp.apiFetch;var s=n.n(l);const d=window.wp.url,u=window.React;const c=window.ReactJSXRuntime,C=({fill:e="#000"})=>(0,c.jsx)("svg",{viewBox:"0 0 660 600",version:"1.1",id:"webinista_WreaditIcon","aria-hidden":"true","data-testid":"wreadit_icon",children:(0,c.jsx)("g",{transform:"translate(33.000000, 30.000000)",fill:e,fillRule:"evenodd",stroke:"none",strokeWidth:"1","data-testid":"wreadit_icon_fill",children:(0,c.jsx)("path",{d:"M423.063063,557 C426.186186,557 429.309309,556.398734 432.432432,555.196203 C483.123123,533.310127 523.723724,499.218354 554.234234,452.920886 C584.744745,406.623418 600,355.816456 600,300.5 C600,245.183544 584.744745,194.436709 554.234234,148.259494 C523.723724,101.841772 483.123123,67.6898734 432.432432,45.8037975 C429.309309,44.6012658 426.186186,44 423.063063,44 C416.816817,44 411.411411,46.2848101 406.846847,50.8544304 C402.282282,55.4240506 400,60.835443 400,67.0886076 C400,75.7468354 404.684685,82.8417722 414.054054,88.3734177 C415.735736,89.335443 418.438438,90.5981013 422.162162,92.1613924 C425.885886,93.7246835 428.588589,94.9873418 430.27027,95.9493671 C441.321321,101.962025 451.171171,108.094937 459.81982,114.348101 C489.369369,136.234177 512.432432,163.531646 529.009009,196.240506 C545.585586,228.949367 553.873874,263.702532 553.873874,300.5 C553.873874,337.297468 545.585586,372.050633 529.009009,404.759494 C512.432432,437.468354 489.369369,464.765823 459.81982,486.651899 C451.171171,492.905063 441.321321,499.037975 430.27027,505.050633 C428.588589,506.012658 425.885886,507.275316 422.162162,508.838608 C418.438438,510.401899 415.735736,511.664557 414.054054,512.626582 C404.684685,518.158228 400,525.253165 400,533.911392 C400,540.164557 402.282282,545.575949 406.846847,550.14557 C411.411411,554.71519 416.816817,557 423.063063,557 Z M253.916667,520 C260.168403,520 265.578559,517.713542 270.147135,513.140625 C274.715712,508.567708 277,503.152412 277,496.894737 L277,496.894737 L277,104.105263 C277,97.8475877 274.715712,92.4322917 270.147135,87.859375 C265.578559,83.2864583 260.168403,81 253.916667,81 C247.664931,81 242.254774,83.2864583 237.686198,87.859375 L237.686198,87.859375 L117.580729,208.078947 L23.0833333,208.078947 C16.8315972,208.078947 11.421441,210.365406 6.85286458,214.938322 C2.28428819,219.511239 0,224.926535 0,231.184211 L0,231.184211 L0,369.815789 C0,376.073465 2.28428819,381.488761 6.85286458,386.061678 C11.421441,390.634594 16.8315972,392.921053 23.0833333,392.921053 L23.0833333,392.921053 L117.580729,392.921053 L237.686198,513.140625 C242.254774,517.713542 247.664931,520 253.916667,520 Z M387.4,472 C390.28,472 393.28,471.39951 396.4,470.198529 C430,456.026961 457,433.38848 477.4,402.283088 C497.8,371.177696 508,337.25 508,300.5 C508,263.75 497.8,229.882353 477.4,198.897059 C457,167.671569 430,144.973039 396.4,130.801471 C393.28,129.60049 390.16,129 387.04,129 C380.8,129 375.4,131.281863 370.84,135.845588 C366.28,140.409314 364,145.813725 364,152.058824 C364,161.426471 368.68,168.512255 378.04,173.316176 C391.48,180.281863 400.6,185.566176 405.4,189.169118 C423.16,202.139706 437.02,218.41299 446.98,237.988971 C456.94,257.564951 461.92,278.401961 461.92,300.5 C461.92,322.598039 456.94,343.435049 446.98,363.011029 C437.02,382.58701 423.16,398.860294 405.4,411.830882 C400.6,415.433824 391.48,420.718137 378.04,427.683824 C368.68,432.487745 364,439.573529 364,448.941176 C364,455.186275 366.28,460.590686 370.84,465.154412 C375.4,469.718137 380.92,472 387.4,472 Z M351.081967,387 C354.688525,387 357.693989,386.399306 360.098361,385.197917 C376.928962,378.470139 390.453552,367.237153 400.672131,351.498958 C410.89071,335.760764 416,318.761111 416,300.5 C416,282.238889 410.830601,265.179167 400.491803,249.320833 C390.393443,233.4625 376.928962,222.289583 360.098361,215.802083 C357.693989,214.600694 354.688525,214 351.081967,214 C344.830601,214 339.420765,216.222569 334.852459,220.667708 C330.284153,225.112847 328,230.579167 328,237.066667 C328,242.1125 329.442623,246.377431 332.327869,249.861458 C335.213115,253.345486 338.699454,256.348958 342.786885,258.871875 C346.874317,261.394792 350.961749,264.157986 355.04918,267.161458 C359.136612,270.164931 362.622951,274.429861 365.508197,279.95625 C368.393443,285.482639 369.836066,292.330556 369.836066,300.5 C369.836066,308.669444 368.393443,315.517361 365.508197,321.04375 C362.622951,326.570139 359.136612,330.835069 355.04918,333.838542 C350.961749,336.842014 346.874317,339.605208 342.786885,342.128125 C338.699454,344.651042 335.213115,347.654514 332.327869,351.138542 C329.442623,354.622569 328,358.8875 328,363.933333 C328,370.420833 330.284153,375.887153 334.852459,380.332292 C339.420765,384.777431 344.830601,387 351.081967,387 Z",fillRule:"nonzero"})})}),p=window.wp.editor,h=window.wp.components,w=({notGenerated:e=!0,isGenerating:t=!1,audioUrl:n=null,requestGeneration:i=null,copyDisabled:r=!0,onCopy:a=null,deleteDisabled:l=!1,onConfirmDelete:s=null,isConfirmOpen:d=!1,isModalOpen:u=!1,onModalClose:w=null,onCancelDelete:m=null,urlRef:f=null,afterConfirmDelete:v=null})=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(p.PluginDocumentSettingPanel,{className:"wreadit_panel",name:"webinista-readit",title:(0,o.__)("Create an audio version"),icon:(0,c.jsx)(h.Icon,{icon:C}),children:[e&&(0,c.jsx)(h.Button,{variant:"primary",isBusy:t,type:"submit",onClick:i,children:"Generate audio version"}),!e&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{children:(0,c.jsx)(h.TextControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,value:n,readOnly:!0,type:"url",label:"Audio version URL",id:"wreadit_url",label:"Audio file URL",ref:f})}),(0,c.jsxs)("div",{className:"wreadit_buttonrack",children:[(0,c.jsx)(h.Button,{__next40pxDefaultSize:!0,accessibleWhenDisabled:!0,variant:"primary",onClick:a,disabled:r,children:"Copy to clipboard"}),(0,c.jsx)(h.Button,{__next40pxDefaultSize:!0,accessibleWhenDisabled:!0,isDestructive:!0,variant:"default",onClick:s,disabled:l,children:"Delete"})]})]})]}),u&&(0,c.jsxs)(h.Modal,{bodyOpenClassName:"wreadit_audio_deleted_modal_open",focusOnMount:"firstElement",size:"medium",title:"Success: Audio deleted",onRequestClose:w,focusOnMount:!0,children:[(0,c.jsx)("p",{children:"I've deleted the previous audio version of this post."}),(0,c.jsx)(h.Button,{variant:"primary",onClick:w,children:"Close"})]}),(0,c.jsxs)(h.__experimentalConfirmDialog,{className:"wreadit_confirm_delete",confirmButtonText:"Yes",isOpen:d,onConfirm:v,onCancel:m,children:[(0,c.jsx)("h1",{className:"components-modal__header-heading",children:"Confirm"}),(0,c.jsxs)("p",{children:["Are you sure you want to delete the audio version of this post? ",(0,c.jsx)("strong",{children:"You can't undo this action."})]})]})]}),m=({code:e,message:t})=>(0,c.jsx)(p.PluginDocumentSettingPanel,{className:"wreadit_panel wreadit_panel--error",name:"webinista-readit",title:(0,o.__)("Create an audio version"),icon:(0,c.jsx)(h.Icon,{icon:C}),children:(0,c.jsx)("div",{dangerouslySetInnerHTML:{__html:t}})});(0,i.registerPlugin)("webinista-wreadit",{render:()=>{const[e,t]=(0,r.useState)(!1),[n,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!0),[C,p]=(0,r.useState)(null),[h,f]=(0,r.useState)(null),[v,x]=function(){const[e,t]=u.useState(null);return[e,u.useCallback((e=>{(async()=>{try{if(!navigator?.clipboard?.writeText)throw new Error("writeText not supported");await navigator.clipboard.writeText(e),t(e)}catch(n){!function(e){const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}(e),t(e)}})()}),[])]}(),[_,b]=(0,r.useState)(!1),[g,j]=(0,r.useState)(!0),[O,y]=(0,r.useState)(!1),[S,D]=(0,r.useState)(!1),[k,L]=(0,r.useState)(null);(0,r.useEffect)((()=>{null===C&&R()}),[C]);const M=(0,r.useRef)(null),T=(0,a.useSelect)((e=>e("core/editor").getCurrentPostId()),[]),R=()=>{const e={path:(0,d.addQueryArgs)("/wreadit/v1/audio",{post_id:T})};s()(e).then((e=>{Object.hasOwn(e,"token")&&L(e?.token);const{audio:t}=e;!1===t?p(!1):t.length?(p(t[0].guid),l(!1),j(!1),f(t[0].ID)):p("")})).catch((e=>{t({error:!0,...e})}))},P=()=>{y(!0)};return e?(0,c.jsx)(m,{...e}):(0,c.jsx)(w,{notGenerated:o,isGenerating:n,requestGeneration:()=>{i(!0);const e={path:"/wreadit/v1/audio",data:{post_id:T,_wpnonce:k},method:"POST"};s()(e).then((e=>{if(!e||!Object.hasOwn(e,"url"))throw new Error("Something is wrong. The server response didn't include a URL.");p(e.url),L(e?.token),l(!1),i(!1),j(!1),f(e?.audio_id)}))},audioUrl:C,urlRef:M,onCopy:()=>{if(!Object.hasOwn(M,"current"))throw new Error("I can't find the text to copy. Save your post and reload the page.");let e;x(M.current.value),b(!0),e=setTimeout((()=>{b(!1),clearTimeout(e)}),3e3)},copyDisabled:_,onConfirmDelete:()=>{D(!0)},deleteDisabled:g,onCancelDelete:()=>{D(!1)},isModalOpen:O,onModalClose:()=>{y(!1)},isConfirmOpen:S,afterConfirmDelete:()=>{const e={path:"/wreadit/v1/audio/delete",data:{post_id:T,audio_id:h,_wpnonce:k},method:"POST"};s()(e).then((e=>{if(!Object.hasOwn(e,"success")||!0!==e?.success)throw new Error("Could not delete the audio post.");i(!1),l(!0),p(""),f(null),b(!1),j(!0),P()}))}})}})}},n={};function i(e){var o=n[e];if(void 0!==o)return o.exports;var r=n[e]={exports:{}};return t[e](r,r.exports,i),r.exports}i.m=t,e=[],i.O=(t,n,o,r)=>{if(!n){var a=1/0;for(u=0;u<e.length;u++){for(var[n,o,r]=e[u],l=!0,s=0;s<n.length;s++)(!1&r||a>=r)&&Object.keys(i.O).every((e=>i.O[e](n[s])))?n.splice(s--,1):(l=!1,r<a&&(a=r));if(l){e.splice(u--,1);var d=o();void 0!==d&&(t=d)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,o,r]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var o,r,[a,l,s]=n,d=0;if(a.some((t=>0!==e[t]))){for(o in l)i.o(l,o)&&(i.m[o]=l[o]);if(s)var u=s(i)}for(t&&t(n);d<a.length;d++)r=a[d],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(u)},n=globalThis.webpackChunkwebinista_readit=globalThis.webpackChunkwebinista_readit||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=i.O(void 0,[350],(()=>i(919)));o=i.O(o)})();